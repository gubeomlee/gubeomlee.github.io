---
layout: default
title: JOIN
parent: Web_Back
nav_order: 11
---

# JOIN

---

## JOIN

- 둘 이상의 테이블에서 데이터를 조회하기 위해서 사용한다.
- 일반적으로 조인조건은 PK와 FK로 구성된다.
- 논리적 연관만으로 JOIN이 가능하다.
- INNER JOIN: 조인 조건에 해당하는 컬럼이 양쪽테이블에 모두 존재하는 경우에만 조회한다.
- OUTER JOIN: 조인 조건에 해당하는 컬럼이 한쪽테이블에만 존재하더라도 조회한다.
- 카타시안 곱: 첫번째 테이블의 모든행이 두번째 테이블의 모든 행에 조인되어 처리된다.
- SELF JOIN: 같은 테이블을 조인한 것이다.
- Non-Equi JOIN(비 동등 조인): 조인조건이 정확히 일치하지 않을 때 사용한다.

## SubQuery

- 하나의 SQL문 안에 포함되어 있는 SQL문을 의미한다. 내부쿼리 라고도 부른다.
- 서비쿼리를 포함하는 SQL을 외부쿼리 또는 메인쿼리라고 한다.
- 중첩 서브쿼리: WHERE 절에 작성하는 서브쿼리다.
- 인라인 뷰: FROM절에 작성하는 서브쿼리다.
- 스칼라 서브쿼리: SELECT문에 작성하는 서브쿼리다.
- 서브쿼리를 포함할수 있는 SQL문: SELECT, FROM, WHERE, HAVING, ORDER BY, INSERT 문의 VALUES, UPDATE 문의 SET
- 서브쿼리 사용시 주의사항: 서비쿼리는 ()감싸서 사용한다. 서브쿼리는 단일 행 또는 다중 행 비교 연산자와 함께 사용 가능하다.
- 서브쿼리에서는 메인쿼리 컬럼명 사용이 가능하지만, 메인쿼리에서는 서브쿼리 컬러명을 사용할 수 없다.

## DB 모델링

- 업무 프로세스는 개념적 모델림 통해 개념적 구조가 된다.
- 개념적 구조는 논리적 모델링을 통해 데이터 모델이 된다.
- 데이터 모델은 물리적 모델링을 통해 물리적 데이터베이스가 된다.

#### 개념적 데이터베이스 모델링

- 사용자 부문의 처리현상을 분석한다.
- 중요 실체와 관계를 파악하여 ERD를 작성한다.
- 실체에 대한 상세 정의를 한다.
- 식별자를 정의하고, 식별자 업무규칙을 정한다.
- 실체별로 속성을 상세화한다.
- 필요한 속성 및 영역을 상세 정의한다.
- 속성에 대한 업무규칙을 정의한다.
- 각 단계를 마친 후 사용자와 함께 모델을 검토한다.

#### 개체와 속성

- 개체(Entity): 사용자와 관계가 있는 주요 객체로 데이터로 관리된다.
- Entity는 영속적으로 존재하는 것으로, 새로 식별이 가능한 데이터 요소를 갖는다. 개체는 속성을 갖는다.
- 속성(Attribute): 저장할 필요가 있는 실체에 관한 정보다. 개체의 성질, 분류, 수량, 상태, 특성 등을 나타내는 세부사항이다. 개체에 포함되는 속성의 숫자를 10개 내외로 하는 것 바람직하다. 최종 DB 모델링 단계를 통해 테이블 컬럼으로 활용한다.

#### 키

- 식별자: 한 개체 내에서 인스턴스를 구분할 수 있는 단일 속성 또는 속성 그룹이다.
- 후보키(Candidate Key): 개체내에서 각각의 인스턴스를 구분할 수 있는 속성이다. (기본키가 될 수 있다.)
- 기본키(Primary Key): 유일하게 식별하는데 적합한 키다.
- 대체키(Alternate Key): 후보키 중에서 기본키로 선정되지 않은 키다.
- 복합키(Composite Key): 둘 이상의 컬럼을 묶어서 식별자로 정의한다.
- 대리키(Surrogate Key): 식별자가 너무 길거나 여러개의 속성으로 구성되어 있는 경우 인위적으로 추가한다.

#### 관계

- 관계차수: 일대일, 일대다, 다대다 관계가 존재한다.
- 선택성: 일자형은 필수를 원형은 선택사항을 나타낸다.

#### 논리적 데이터베이스 모델링

- 스키마를 설계하는 단계와 정규화하는 단계로 나뉜다.
- 기본키는 후보키 중에서 선택한다. NOT NULL, UNIQUE하다.
- 참조키(외래키, FOREIGN KEY) 관계를 맺는 두 엔터티에서 서로 참조하는 관계의 속성으로 지정된 키다.

#### 정규화

- 정규화: 관계형 데이터베이스 설계에서 중복을 최소화하는 구조화 프로세스다.
- 데이터베이스 변경 시 이상 현상을 제거한다.
- 구조 확장 시 재 디자인을 최소화한다.
- 사용자에게 데이터 모델을 더욱 의미있게 작성하도록 한다.
- 다양한 질의를 지원한다.
- 제 1정규화: 원자화
- 제 2정규화: 부분함수 종속 제거
- 제 3정규화: 이행함수 종속 제거

#### 물리적 데이터베이스 모델링

- DBMS 특성에 맞게 실제 데이터베이스 내의 개체들을 정의하는 단계다.
- 데이터 사용량 분석과 업무 프로세스 분석을 통해 보다 효율적인 데이터베이스가 될 수 있도록 효과적인 인덱스를 정의하고 상황에 따른 역정규화 작업을 수행한다.
- 역정규화: 시스템 성능을 고려하여 기존 설계를 재구성한다. 정규화에 위배되는 행위다. 테이블을 재구성한다.
- 역정규화 방법: 데이터 중복(컬럼 역정규화), 파생 컬럼 생성, 테이블 분리, 요약 테이블 생성, 테이블 병합
