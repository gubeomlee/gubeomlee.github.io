---
layout: default
title: 대용량 데이터에 따른 성능
parent: SQLD
nav_order: 8
---

# 대용량 데이터에 따른 성능

---

## 대용량 데이터의 성능 저하 원인

- 대량의 데이터가 하나의 테이블에 집약되어 있고, 하나의 하드웨어 공간에 저장되어 있으면 성능 저하가 발생한다.
- 데이터의 양이 많은 경우와 컬럼의 수가 많은 경우 2가지가 존재한다.

#### 데이터 양이 많은 경우

- 인덱스 트리 구조가 커져서 효율성이 떨어진다. 삽입, 추가, 삭제 시 디스크 I/O가 많이 발생한다.
- 데이터가 디스크의 여러 블록에 존재하므로 디스크에서 데이터를 읽는 I/O 양이 많아져서 성능이 저하된다.

#### 컬럼의 수가 많은 경우

- 데이터가 다수 블록에 저장되므로 다수의 I/O를 발생시켜 성능 저하가 발생한다.

#### 로우체이닝, 로우마이그레이션 현상

- 로우체이닝, 로우마이그레이션이 발생하면 많은 블록에 데이터가 저장되어 불필요한 I/O가 발생하여 성능이 저하된다.
- 로우체이닝 현상: 데이터 저장 시 공간 부족으로 발생한다. 데이터를 여러 블록에 저장하게 된다. 블록 내에 행조각과 위치정보를 블록 내에 저장한다. 블록의 크기를 키워 해결 가능하다.
- 로우마이그레이션 현상: 수정된 데이터를 다른 블록의 빈공간에 저장하는 방식이다. 수정 시 행 저장공간 부족이 발생한다. 원래 정보의 위치를 저장하고 실제 데이터는 다른 블록에 저장한다. 검색 시 원래 블록에서 주소를 읽고 다른 블록을 찾으므로 선능이 감소한다.

## 대용량 데이터의 성능 향상 방법

#### 파티셔닝

- 테이블을 여러 개의 파티션으로 나눠 접근성 및 관리를 개선한다.
- 대용량 테이블 보다 작은 파티션으로 관리하여 성능 저하를 방지하고 데이터 관리르 용아하게 한다.
- 논리적으로는 하나의 테이블이지만 여러 개의 데이터 파일에 분산되어 저장된다.
- 데이터 조회 시 접근 범위가 줄어든다.
- 각 파티션을 독립적으로 백업 및 복구가 가능하다.
- 레인지 파티셔닝: 가장 많이 사용한다. 데이터 값의 범위를 기준으로 보관주기에 따라 데이터를 쉽게 지울 수 있어 데이터 관리가 용이하다. 데이터가 균등하게 파티션에 들어가지 않는다.
- 리스트 파티셔닝: 가장 적게 사용한다. 특정값을 지정하여 파티셔닝한다. 데이터 보관주기에 따라 삭제하는 것이 불가능하다.
- 해시 파티셔닝: 함시함수를 사용하여 테이블마다 값이 균등하게 분포된다. 데이터가 균등하게 분포되어 성능이 향상된다. 데이터 보관주기에 따라 삭제하는 것이 불가능하다. 데이터가 정확히 어떻게 들어갔는지 알수 없어 관리가 어렵다.
- 컴포지트 파티셔닝: 레인지, 리스트, 해시 파티셔닝 중 2개 이상을 결합하는 방법이다.

#### 테이블 분할

- 테이블을 분할하여 I/O를 줄이고 성능을 향상시킨다.
- 수평분할, 수직분할로 구분한다.
- 다음의 4원칙을 적용한다.

1. 데이터 모델링을 완성한다.
2. 데이터베이스 용량산정을 한다.
3. 대량 데이터가 처리되는 테이블에 대해서 트랜잭션 처리 패턴을 분석한다.
4. 행/열 단위로 집중화된 처리가 발생하는지 분석하여 집중화된 단위로 테이블을 분리하는 것을 검토한다.
