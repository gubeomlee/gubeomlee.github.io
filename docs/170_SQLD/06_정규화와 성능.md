---
layout: default
title: 정규화와 성능
parent: SQLD
nav_order: 6
---

# 정규화와 성능

---

## 성능 데이터 모델링의 개요

#### 성능 데이터 모델링의 개념

- 분석/설계 단계부터 데이터베이스 성능을 고려하는 것이다.
- 데이터 모델을 중심으로 성능에 대한 데이터 모델링을 수행한다.

#### 성능이 저하되는 데이터 모델

- 잘못 설계된 데이터 모델의 구조로 인해 성능이 저하된다.
- 데이터가 대용량으로 누적되면 성능이 저하된다.
- 잘못 생성된 인덱스로 인해 성능이 저하된다.

#### 성능 데이터 모델링의 수행 절차

1. 정규화: 정규화를 정확히 수행한다.
2. 용량산정: 데이터베이스 용량을 산정한다.
3. 트랜잭션: 데이터베이스에 발생하는 트랜잭션 유형을 파악한다.
4. 반정규화: 용량과 트랜잭션 유형에 따라 반정규화를 수행한다.
5. 조정: 이력모델 조정, PK/FK 조정, 슈펴타입/서브타입 조정 등을 수행한다.
6. 성능관점: 성능관점에서 데이터 모델을 검증한다.

## 데이터베이스 정규화

#### 정규화의 개념

- 데이터를 일정한 규칙에 따라 변형하여 이용하기 쉽게 만드는 것이다.
- 데이터의 일관성, 최소한의 중복, 최대한의 유연성을 위한 방법이다.
- 데이터를 분해하는 과정이다.
- 데이터의 중복을 제거하고 데이터 모델의 독립성을 확보한다.
- 데이터 이상현상을 줄이기 위한 데이터 베이스 설계기법이다.
- 엔터티 상세화하는 과정으로 논리 데이터 모델링 수행 시점에서 고려된다.

#### 이상현상

- 삽입이상: 행 사입 시 지정되지 않은 속성 값이 NULL을 가지는 경우다.
- 갱신이상: 데이터 갱신 시 일부분의 데이터만 갱신되어 일관성 유지가 안되는 경우다.
- 삭제이상: 행 삭제 시 원하지 않는 연쇄 삭제가 발생하는 경우다.

#### 함수적 종속성

- 속성의 부분집합 x, y에 대해서 x값에 따라 y값이 달라지는 경우 y는 x에 대해서 함수적 종속관계를 갖는다. x를 결정자, y를 종속자라고 한다.
- 함수적 종속성은 데이터가가지고 잇는 속성간의 관계에 의해 결정되고 종속되는 현상이다.
- 정규화는 함수적 종속성에 근거한다.
- 함수적 종속성의 유형에는 완전 함수 종속성, 부분 함수 종속성, 이행 함수 종속성, 결정자 함수 종속성이 있다.
- 완전 함수 종속성: 식별자 전체 속성이 일반 속성을 결정한다.
- 부분 함수 종속성: 복합 식별자의 부분 속성이 일반 속성을 결정한다.
- 이행 함수 종속성: 일반 속성이 다른 일반 속성을 결정한다.
- 결정자 함수 종속성: 후보키가 아닌 결정자가 존재한다.

#### 정규화 단계

- 제 1정규화: 테이블 내의 속성의 원자성을 확보하는 단계다. 기본키(Primary Key)를 설정한다.
- 제 2정규화: 기본키가 2개 이상의 속성으로 이루어진 경우 부분 함수 종속성을 제거한다. 기본키에 대해 완전 함수적 종속성 관계에 있다.
- 제 3정규화: 기본키를 제외한 컬럼 간의 종속성을 제거한다. 이행 함수 종속성이 제거된다.
- BCNF(Boyce-Codd Normal Form): 기본키를 제외한 후보키가 있는 경우 호보키가 기본키를 종속시키며 분해한다. 결정자 함수 종속성을 제거하는 단계다. 강한 제3정규화다.
- 제 4정규화: 여러 칼럼들이 하나의 칼럼을 종속시키는 경우 분해하여 다중값 종속성을 제거한다.
- 제 5정규화: 조인에 의해서 종속성이 발생되는 경우 분해한다.

## 정규화 고려사항

- 모든 정규화는 이전 정규화를 만족해야 한다.
- 정규화를 하면 삽입, 갱신, 삭제 이상은 제거되지만 테이블이 여러개로 분해되어 데이터를 조회할 때 조인이 발생할 가능성이 높아져 조회 성능이 저하될 수 있다.
- 조인이 증가하는 경우 I/O 증가 및 조인 연산으로 조회 성능이 저하될 수 있다.
- 단일 테이블 조회 시 데이터 중복이 제거되어 조회 성능이 향상될 수 있다.
